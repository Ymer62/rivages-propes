function progressBar(a){if(a.lengthComputable){$("progress").attr({value:a.loaded,max:a.total})}}$(document).ready(function(){$("#addSponsor").click(function(){$("#formSponsors")[0].reset();$("#sponsors").modal("open")});$("#btnSubmitSponsor").click(function(){if($('input[name="formSponsor"]').val()==""){alert("Vous n'avez pas sélectionné d'image !");return}var c=$('#sponsors input[type="hidden"]').val();var a=$("#formSponsorAlt").val();var b=new FormData($("#formSponsors")[0]);$.ajax({url:"ajax.php?ajax=addSponsor",type:"POST",xhr:function(){myXhr=$.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener("progress",progressBar,false)}return myXhr},beforeSend:function(){$("#progress").modal("open")},success:function(g,h,e){var d=jQuery.parseJSON(g);var f='<div class="sponsor">                    <i data-id="'+d[0]+'" class="small material-icons delSponsor">delete</i>                    <img src="img/sponsors/'+d[1]+'" alt="'+d[2]+'">                  </div>';$("#sponsorsContainer").append(f);$("#progress").modal("close");$("#sponsors").modal("close")},error:{},data:b,cache:false,contentType:false,processData:false})});$(document).on("click",".delSponsor",function(){var a=$(this).parent();var c=$(this).data("id");var b=confirm("Voulez-vous vraiment supprimer ce sponsor ?");if(b){$.ajax({type:"POST",url:"ajax.php?ajax=deleteSponsor",data:{id:c},success:function(e,f,d){if(e.trim()=="OK"){a.remove()}}})}});$(".modal").modal();$("h1, h2, h3, h4, h5").keydown(function(){$(this).children("i").css({display:"inline"});$(this).children("i").html("mode_edit")});$(".editTitle").click(function(){var c=$(this);var b=c.parent().children("span").html().trim();var a=c.parent().data("page");b=b?b:"Titre de page";c.parent().children("span").html(b);$.ajax({type:"POST",url:"ajax.php?ajax=editTitle",data:{page:a,title:b},success:function(e,f,d){if(e.trim()=="OK"){c.parent().children("i").html("check");setTimeout(function(){c.parent().children("i").fadeOut()},2000)}}})});$(".note-editor").click(function(){var b=$(this).parent().children("div").first();var a=b.data("btn");$("#"+a+" i").css({display:"block"});$("#"+a+" i").html("mode_edit")});$(".btnTextAdmin").click(function(){var d=$(this);var a=d.data("box");var b=$("#"+a).data("page");var c=$("#"+a).children("div").last().children(".note-editable").html().trim();$.ajax({type:"POST",url:"ajax.php?ajax=editText",data:{page:b,text:c},success:function(f,g,e){if(f.trim()=="OK"){d.children("i").html("check");setTimeout(function(){d.children("i").fadeOut()},2000)}}})});$("#btnSubmitConfig").click(function(){var h=$(this);var i=h.data("page");var a=$("#formConfigTitle").val().trim();var c=$("#formConfigMetaDesc").val().trim();var l=$("#formConfigColorLinks").val().trim();var d=$("#formConfigColorLinksHover").val().trim();var k=$("#formConfigColorLinksActive").val().trim();var j=$("#formConfigColorButtons").val().trim();var g=$("#formConfigColorButtonsHover").val().trim();var b=$("#formConfigColorButtonsActive").val().trim();var f=$("#formConfigColorButtonsText").val().trim();var e=$("#formConfigColorTitles").val().trim();$.ajax({type:"POST",url:"ajax.php?ajax=editConfig",data:{page:i,head_title:a,head_meta_desc:c,links:l,links_hover:d,links_active:k,buttons:j,buttons_hover:g,buttons_active:b,buttons_text:f,titles:e},success:function(n,o,m){if(n.trim()=="OK"){document.title=a}}})})});var toolbar=[["style",["style","bold","italic","underline","strikethrough","clear"]],["fonts",["fontsize","fontname"]],["color",["color"]],["undo",["undo","redo","help"]],["ckMedia",["ckImageUploader","ckVideoEmbeeder"]],["misc",["link","picture","table","hr","codeview","fullscreen"]],["para",["ul","ol","paragraph","leftButton","centerButton","rightButton","justifyButton","outdentButton","indentButton"]],["height",["lineheight"]],];$(".editor").materialnote({toolbar:toolbar,height:550,minHeight:100,defaultBackColor:"#fff"});$(".editorAir").materialnote({airMode:true,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]});